<!DOCTYPE html>
<html>
  <head>
    <title>My experiment</title>
    <script src="js/etc.js"></script>
    <script src="js/cards.js"></script>
    <script src="js/jspsych-6_1_0/jspsych.js"></script>
    <script src="js/jspsych-6_1_0/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="js/jspsych-6_1_0/plugins/card-game-plugin.js"></script>
    <link href="js/jspsych-6_1_0/css/jspsych.css" rel="stylesheet" type="text/css"></link>
  </head>
  <body></body>
  <script>
    var game_type = "straight_flush";
    var timeline = [];
    var num_sampling_bins = 8;


    // block 1: training on original game, see results
    var losers = false; 
    var see_result = true;
    var trials_per_bin = 2;

    var hands = binned_sample(straight_flush_hand_order, num_sampling_bins, trials_per_bin);
    shuffle(hands);
    var this_trial;

    for (var hand_i = 0; hand_i < hands.length; hand_i ++) {
        this_trial = {
          type: "card_game",
          game_type: game_type,
          losers: losers,
          see_result: see_result,
          my_hand: hands[hand_i] 
        };
        timeline.push(this_trial);

    }

    // block 2: testing on original game, don't see results
    see_result = false;
    hands = binned_sample(straight_flush_hand_order, num_sampling_bins, trials_per_bin);
    shuffle(hands);

    for (var hand_i = 0; hand_i < hands.length; hand_i ++) {
        this_trial = {
          type: "card_game",
          game_type: game_type,
          losers: losers,
          see_result: see_result,
          my_hand: hands[hand_i] 
        };
        timeline.push(this_trial);

    }

    // block 3: losers version, don't see results
    losers = false;
    hands = binned_sample(straight_flush_hand_order, num_sampling_bins, trials_per_bin);
    shuffle(hands);

    for (var hand_i = 0; hand_i < hands.length; hand_i ++) {
        this_trial = {
          type: "card_game",
          game_type: game_type,
          losers: losers,
          see_result: see_result,
          my_hand: hands[hand_i] 
        };
        timeline.push(this_trial);

    }
    console.log(timeline);

    jsPsych.init({
      timeline: timeline
    });
  </script>
</html>
